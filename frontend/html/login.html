<!DOCTYPE html>
<html>
<head>
    <title>API Demo</title>
</head>
<body>
    <h1>API Demo</h1>
    <p>Erstelle einen neuen Benutzer:</p>
    <label for="id">ID:</label>
    <input type="text" id="id"><br>
    <label for="name">Name:</label>
    <input type="text" id="name"><br>
    <label for="guthaben">Guthaben:</label>
    <input type="text" id="guthaben"><br>
    <button onclick="createUser()">Erstellen</button>

    <p>Aktualisiere das Guthaben eines Benutzers:</p>
    <label for="id2">ID:</label>
    <input type="text" id="id2"><br>
    <label for="neues_guthaben">Neues Guthaben:</label>
    <input type="text" id="neues_guthaben"><br>
    <button onclick="updateGuthaben()">Aktualisieren</button>

    <p>Überprüfe, ob ein Benutzer existiert:</p>
    <label for="id3">ID:</label>
    <input type="text" id="id3"><br>
    <button onclick="checkIfUserExists()">Überprüfen</button>

    <p>Erhalte den Namen eines Benutzers:</p>
    <label for="id4">ID:</label>
    <input type="text" id="id4"><br>
    <button onclick="getNameById()">Abrufen</button>

    <p>Erhalte das Guthaben eines Benutzers:</p>
    <label for="id5">ID:</label>
    <input type="text" id="id5"><br>
    <button onclick="getGuthabenById()">Abrufen</button>

    <script>
        function createUser() {
            const id = document.getElementById("id").value;
            const name = document.getElementById("name").value;
            const guthaben = document.getElementById("guthaben").value;
            fetch('/create_user', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ id: id, name: name, guthaben: guthaben })
            })
            .then(response => {
                if (response.ok) {
                    alert('Benutzer erfolgreich erstellt.');
                } else {
                    alert('Fehler beim Erstellen des Benutzers.');
                }
            })
            .catch(error => {
                console.error('Fehler:', error);
            });
        }

        function updateGuthaben() {
            const id = document.getElementById("id2").value;
            const neues_guthaben = document.getElementById("neues_guthaben").value;
            fetch('/update_guthaben', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ id: id, neues_guthaben: neues_guthaben })
            })
            .then(response => {
                if (response.ok) {
                    alert('Guthaben erfolgreich aktualisiert.');
                } else {
                    alert('Fehler beim Aktualisieren des Guthabens.');
                }
            })
            .catch(error => {
                console.error('Fehler:', error);
            });
        }

        function checkIfUserExists() {
        const id = document.getElementById("id3").value;
        fetch(`/check_if_user_exists/${id}`)
        .then(response => response.json())
        .then(data => {
            if (data.exists) {
                alert('Der Benutzer existiert.');
            } else {
                alert('Der Benutzer existiert nicht.');
            }
        })
        .catch(error => {
            console.error('Fehler:', error);
        });
    }

    function getNameById() {
        const id = document.getElementById("id4").value;
        fetch(`http://127.0.0.1:8000/check_if_user_exists/${id}`)
        .then(response => response.text())
        .then(data => {
            if (data) {
                alert(`Der Name des Benutzers lautet: ${data}`);
            } else {
                alert('Der Benutzer existiert nicht.');
            }
        })
        .catch(error => {
            console.error('Fehler:', error);
        });
    }

    function getGuthabenById() {
        const id = document.getElementById("id5").value;
        fetch(`http://127.0.0.1:8000/get_guthaben_by_id?id=${id}`)
        .then(response => response.text())
        .then(data => {
            if (data) {
                alert(`Das Guthaben des Benutzers beträgt: ${data}`);
            } else {
                alert('Der Benutzer existiert nicht.');
            }
        })
        .catch(error => {
            console.error('Fehler:', error);
        });
    }
</script>
</body>
</html>

